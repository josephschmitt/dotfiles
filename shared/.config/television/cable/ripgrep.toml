# Interactive ripgrep search channel
# Use wrapper script to inject search query via --source-command override

[metadata]
name = "ripgrep"
description = "Search code with ripgrep and fuzzy filter results"
requirements = ["rg", "bat"]

[source]
# Default command (overridden by wrapper with actual search query)
command = "echo 'Use ripgrep-popup-tv.sh wrapper to search'"

# Display full line with ANSI colors preserved
display = "{}"

# Output format: file:line
output = "{split::0}:{split::1}"

[preview]
# Extract file path and line number, highlight the matched line
command = "bat --style=full --color=always --highlight-line $(echo {} | cut -d: -f2) $(echo {} | cut -d: -f1) 2>/dev/null"

[ui]
layout = "landscape"
preview_size = 55
