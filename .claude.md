# Agent Guidelines for Dotfiles Repository

## Repository Overview
This is a personal dotfiles repository managed with GNU Stow. No build system - use `stow .` to install configs.

## Environment Context
- Platform: macOS
- Shell: Fish shell with custom prompt
- Editor: Neovim (LazyVim) + Helix as secondary
- Package Manager: GNU Stow
- No tests/linting - configuration files only

## Key Commands
- **Install**: `stow .` (from repo root)
- **Uninstall**: `stow -D .`
- **Restow**: `stow -R .`

## Code Style Guidelines

### Shell Scripts
- Use `#!/bin/sh` for POSIX compatibility
- Set `set -x` for debugging when needed
- Use `[[ ]]` for bash-specific tests
- Variables in `${var}` format for clarity

### Lua (Neovim configs)
- 2-space indentation (per stylua.toml)
- Column width: 120 characters  
- Use `-- stylua: ignore` to skip formatting specific lines
- Plugin configs return tables with dependency/opts structure
- Comment disabled code with early returns: `if true then return {} end`

### TOML/Config Files
- 2-space indentation for nested structures
- Use lowercase with hyphens for keys (`line-number`, `cursor-line`)
- Keep related settings grouped together

## File Organization
- Neovim plugins: `.config/nvim/lua/plugins/`
- Shell functions: `.config/fish/functions/`
- Utilities: `bin/` directory
- Theme files in respective app config dirs

## Documentation Maintenance

**CRITICAL**: When making consequential changes to configurations, always update relevant documentation:

### Root README (`/README.md`)
- Update if adding/removing major tools or changing repository structure
- Keep feature list current with actual configurations
- Update quick start instructions if setup process changes

### Setup Guide (`/shared/README.md`)
- Update "What's Included" section when adding/removing tools
- Add troubleshooting entries for new common issues
- Update installation steps if prerequisites change
- Keep tool descriptions accurate with actual configurations

### Nested Project READMEs
- Update any README files in subdirectories (e.g., `.config/*/README.md`)
- Ensure project-specific documentation reflects current configurations
- Update setup instructions for individual tools if changed

### When to Update Documentation
- Adding or removing major tools/configurations
- Changing installation or setup procedures
- Modifying directory structure
- Adding new troubleshooting scenarios
- Updating tool versions with breaking changes
- Changing theming or major customizations

### Documentation Standards
- Keep instructions clear and step-by-step
- Include troubleshooting for common issues
- Maintain consistent formatting and style
- Test instructions on fresh installations when possible
- Link between related documentation sections

## Git Workflow

**IMPORTANT**: Always ask for review before committing:

1. **Show proposed changes**: Use `git diff` or `git status` to show what will be committed
2. **Present commit message**: Draft the commit message and ask for approval
3. **Wait for confirmation**: Get explicit approval before running `git commit`
4. **Push only when requested**: Don't push to remote unless specifically asked

This ensures the user maintains full control over their git history and commit messages.