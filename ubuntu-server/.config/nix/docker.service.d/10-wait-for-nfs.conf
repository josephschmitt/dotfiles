# /etc/systemd/system/docker.service.d/10-wait-for-nfs.conf
#
# Ensures Docker daemon waits for:
# 1. Tailscale to be running (required for Synology NAS access)
# 2. NFS automount to be ready (prevents containers mounting local dirs instead of NFS)
#
# Without this, containers with 'restart: unless-stopped' may start before NFS is mounted,
# binding to empty local directories instead of the NFS share.
#
# Install:
#   sudo cp ~/dotfiles/ubuntu-server/.config/nix/docker.service.d/10-wait-for-nfs.conf \
#           /etc/systemd/system/docker.service.d/10-wait-for-nfs.conf
#   sudo systemctl daemon-reload
#   sudo systemctl restart docker.service

[Unit]
After=tailscaled.service mnt-synology-immich.automount
Wants=mnt-synology-immich.automount
